<!doctype html>
<html lang="en">
<head>
  <title>Text Replacer</title>
  <meta charset="UTF-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <link href="https://unpkg.com/chota@latest" rel="stylesheet" />
  <link href="custom-style.css" rel="stylesheet" />
</head>
<body>
  <div class="container">
    <header>
      <h1>Text replacements</h1>
    </header>
    <main role="main">
      <section>
        <fieldset>
          <legend>Preset</legend>
          <p class="grouped">
            <select id="preset-selection"></select>
          </p>
          <p class="grouped">
            <button id="preset-load" title="Loads the preset. THIS WILL OVERRIDE YOUR CURRENT ONE">
              Load
            </button>
            <button id="preset-append" title="Appends the preset you selected.">Append</button>
            <button disabled
                    id="preset-view"
                    title="Shows the preset contents in a separate dialog">
              View
            </button>
          </p>
        </fieldset>
      </section>
      <section id="keys">
        <fieldset>
          <legend>Key -> replacement</legend>
          <div id="key-inputs"></div>
          <button id="new-replacement-pairs">Add</button>
          <button data-target="pair-toggle"
                  data-toggled="false"
                  id="toggle-toggle"
                  onclick="toggleToggles(this)">
            Toggle
          </button>
          <button data-target="pair-sort"
                  data-toggled="false"
                  id="toggle-sort"
                  onclick="toggleToggles(this)">
            Sort
          </button>
          <button data-target="pair-swap"
                  data-toggled="false"
                  id="toggle-swap"
                  onclick="toggleToggles(this)">
            Swap
          </button>
          <button data-target="pair-delete"
                  data-toggled="false"
                  id="toggle-delete"
                  onclick="toggleToggles(this)">
            Delete
          </button>
        </fieldset>
      </section>
      <section id="input">
        <fieldset>
          <legend>Source</legend>
          <p class="grouped">
            <button id="do-replacements">Start replacing text</button>
          </p>
          <textarea id="text-source" rows="15"></textarea>
          <small id="replace-status">...</small>
        </fieldset>
      </section>
      <section id="output">
        <fieldset>
          <legend>Result</legend>
          <p class="grouped">
            <button id="copy-result">Copy result</button>
            <button id="show-replacement-steps">Show steps taken</button>
          </p>
          <textarea id="text-result" readonly rows="15"></textarea>
        </fieldset>
      </section>
    </main>
  </div>

  <!-- DIALOGS -->
  <dialog id="replace-steps-dialog">
    <div id="replacement-steps-container"></div>
    <p>
      <button id="replace-steps-dialog-close">Close</button>
    </p>
  </dialog>

  <!-- TEMPLATES -->
  <template id="template-replace-pairs">
    <p class="replacement-pair grouped" data-enabled="true">
      <button class="pair-toggle button" type="button">üëÅÔ∏è</button>
      <button class="pair-sort pair-direction-up button" type="button">
        ‚¨ÜÔ∏è
      </button>
      <button class="pair-sort pair-direction-down button" type="button">
        ‚¨áÔ∏è
      </button>
      <input class="find-input" placeholder="find" type="text" />
      <button class="pair-swap button"  type="button">üîÅ</button>
      <input class="replace-input" placeholder="replace" type="text" />
      <button class="pair-delete button outline error" type="button">
        üóëÔ∏è
      </button>
    </p>
  </template>
  <template id="template-replace-steps">
    <details class="replace-steps-details">
      <summary class="step-title"></summary>
      <div class="step-content"></div>
    </details>
  </template>

  <!-- SCRIPTS -->
  <script src="index.js"></script>
  <script>
    if (window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.body.classList.add('dark');
    }
  </script>
</body>
</html>
